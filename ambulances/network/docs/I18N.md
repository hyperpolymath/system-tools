# Internationalization (i18n) and Localization (l10n)

## Current Status

**Version 1.0**: English (US) only
**Planned**: v1.2+ will include i18n framework

## Why i18n Matters

Linux is used worldwide. Network issues don't respect language barriers. We want this tool to be accessible to:

- Non-English speakers
- Multilingual teams
- Global system administrators
- International open source contributors

## Goals

1. **Complete Translation**: All user-facing text
2. **Cultural Adaptation**: Date formats, examples, terminology
3. **Maintained Quality**: Keep translations up-to-date
4. **Easy Contribution**: Low barrier for translators

## Architecture Plan

### Message Catalog System

```bash
# Directory structure (planned for v1.2)
locales/
├── en_US/
│   ├── LC_MESSAGES/
│   │   ├── common.po
│   │   ├── diagnostics.po
│   │   ├── repairs.po
│   │   └── interactive.po
│   └── metadata.json
├── es_ES/
│   ├── LC_MESSAGES/
│   │   ├── common.po
│   │   ├── diagnostics.po
│   │   ├── repairs.po
│   │   └── interactive.po
│   └── metadata.json
├── fr_FR/
├── de_DE/
├── ja_JP/
├── zh_CN/
└── pt_BR/
```

### Translation Function

```bash
# Planned implementation
t() {
    local key="$1"
    local locale="${LANG:-en_US}"
    local catalog="${2:-common}"

    # Look up translation
    local translation
    translation=$(get_translation "${locale}" "${catalog}" "${key}")

    # Fallback to English
    if [[ -z "${translation}" ]]; then
        translation=$(get_translation "en_US" "${catalog}" "${key}")
    fi

    # Fallback to key
    echo "${translation:-${key}}"
}

# Usage
log_info "$(t 'msg.network.checking')"
log_error "$(t 'error.no_interface' 'diagnostics')"
```

## Translation Priority

### Phase 1: Core Messages (v1.2)

**Priority**: Critical user-facing text

- Error messages
- Warning messages
- Success messages
- Interactive prompts (y/n, menu choices)
- Help text (`--help` output)

### Phase 2: Documentation (v1.3)

**Priority**: High

- README.md
- CONTRIBUTING.md
- Troubleshooting guide
- Basic usage examples

### Phase 3: Extended Content (v1.4+)

**Priority**: Medium

- Advanced examples
- Architecture documentation
- Code comments (optional)

## Target Languages

### Initial Launch Languages (v1.2)

Based on Linux usage statistics and contributor availability:

1. **Spanish (es_ES, es_MX)** - 400M+ speakers
2. **French (fr_FR)** - 275M+ speakers
3. **German (de_DE)** - 130M+ speakers
4. **Portuguese (pt_BR, pt_PT)** - 250M+ speakers
5. **Japanese (ja_JP)** - 125M+ speakers
6. **Chinese Simplified (zh_CN)** - 1B+ speakers
7. **Russian (ru_RU)** - 260M+ speakers

### Future Languages (v1.4+)

Community-driven:

- Italian (it_IT)
- Korean (ko_KR)
- Arabic (ar)
- Hindi (hi_IN)
- Dutch (nl_NL)
- Polish (pl_PL)
- Turkish (tr_TR)

## Technical Considerations

### Challenges in Bash

1. **No Native i18n**
   - Bash doesn't have built-in gettext support
   - Need custom implementation
   - Consider external tool (gettext, envsubst)

2. **String Concatenation**
   - Bash strings concatenate easily, but translations need placeholders
   - Solution: Use printf-style formatting

3. **File Size**
   - Loading all translations increases script size
   - Solution: Lazy loading, separate files

### Solution Approaches

#### Option 1: gettext (Traditional)

```bash
# Use GNU gettext
source gettext.sh
export TEXTDOMAIN="network-repair"
export TEXTDOMAINDIR="/usr/share/locale"

# Usage
echo "$(gettext "Checking network interfaces...")"
echo "$(eval_gettext "Found \$count interfaces")"
```

**Pros**: Industry standard, tool support
**Cons**: External dependency, slower

#### Option 2: Custom PO Files

```bash
# Parse .po files in bash
load_translations() {
    local locale="$1"
    local po_file="locales/${locale}/LC_MESSAGES/common.po"

    # Parse and cache
    while IFS= read -r line; do
        # msgid "key"
        # msgstr "translation"
        # ...
    done < "${po_file}"
}
```

**Pros**: No external dependencies
**Cons**: Custom parser, more maintenance

#### Option 3: JSON Messages

```bash
# Use jq for JSON parsing
t() {
    local key="$1"
    local locale="${LANG:-en_US}"

    jq -r ".${key} // \"${key}\"" \
        "locales/${locale}/messages.json"
}
```

**Pros**: Easy to parse, readable format
**Cons**: Requires jq dependency

### Recommended Approach

**Hybrid**: JSON for simplicity, with gettext compatibility

```bash
# messages.json
{
  "network.check.start": "Checking network configuration...",
  "network.check.dns": "Checking DNS servers",
  "error.no_interface": "No network interfaces found",
  "prompt.continue": "Continue? (y/n)"
}
```

## Translation Workflow

### For Translators

1. **Join Translation Team**
   - Open issue: "Translation: [Language]"
   - Get added to translators team

2. **Clone Repository**
   ```bash
   git clone https://github.com/Hyperpolymath/complete-linux-internet-repair
   cd complete-linux-internet-repair
   ```

3. **Create Language Directory**
   ```bash
   mkdir -p locales/es_ES/LC_MESSAGES
   cp locales/en_US/LC_MESSAGES/*.po locales/es_ES/LC_MESSAGES/
   ```

4. **Translate**
   - Edit .po files with Poedit or text editor
   - Test translations: `LANG=es_ES ./network-repair diagnose`
   - Submit PR

5. **Maintenance**
   - Watch for new strings (CI notifies)
   - Update translations in follow-up PRs

### For Developers

1. **Extract Strings**
   ```bash
   # Run extraction tool (planned)
   just extract-strings

   # Updates locales/en_US/LC_MESSAGES/*.pot (template)
   ```

2. **Mark Translatable Strings**
   ```bash
   # Instead of:
   echo "Checking DNS..."

   # Use:
   echo "$(t 'dns.check.start')"
   ```

3. **Test Translations**
   ```bash
   # Test Spanish
   LANG=es_ES ./network-repair diagnose

   # Test French
   LANG=fr_FR ./network-repair --help
   ```

## Cultural Considerations

### Date and Time

```bash
# Locale-aware date formatting
format_date() {
    local timestamp="$1"
    local locale="${LANG:-en_US}"

    case "${locale}" in
        en_US)
            date -d "@${timestamp}" "+%m/%d/%Y %I:%M %p"
            ;;
        en_GB)
            date -d "@${timestamp}" "+%d/%m/%Y %H:%M"
            ;;
        ja_JP)
            date -d "@${timestamp}" "+%Y年%m月%d日 %H:%M"
            ;;
        *)
            date -d "@${timestamp}" "+%Y-%m-%d %H:%M"
            ;;
    esac
}
```

### Network Examples

```bash
# Different countries use different private IP ranges
get_example_ip() {
    local locale="${LANG:-en_US}"

    case "${locale}" in
        en_US)
            echo "192.168.1.100"
            ;;
        ja_JP)
            echo "192.168.0.100"  # More common in Japan
            ;;
        *)
            echo "192.168.1.100"
            ;;
    esac
}
```

### Terminology

| English | Spanish | French | German | Notes |
|---------|---------|--------|--------|-------|
| Network Interface | Interfaz de Red | Interface Réseau | Netzwerkschnittstelle | - |
| Gateway | Puerta de Enlace | Passerelle | Gateway | German uses English |
| DNS Server | Servidor DNS | Serveur DNS | DNS-Server | - |
| Routing Table | Tabla de Enrutamiento | Table de Routage | Routing-Tabelle | - |

## Testing Translations

### Manual Testing

```bash
# Test each language
for lang in en_US es_ES fr_FR de_DE; do
    echo "Testing ${lang}..."
    LANG=${lang} ./network-repair diagnose
done
```

### Automated Testing

```bash
# Planned: Translation completeness check
just check-translations

# Output:
# en_US: 100% (245/245)
# es_ES: 98% (240/245) - 5 missing
# fr_FR: 85% (208/245) - 37 missing
```

## Translation Style Guide

### Tone

- **Professional but friendly**
- **Clear and direct**
- **Avoid idioms** (don't translate directly)
- **Technical accuracy** over literal translation

### Format

- **Preserve placeholders**: `%s`, `${var}`, `$count`
- **Maintain line breaks**: Keep `\n` where they appear
- **Keep punctuation**: Match source language style
- **Preserve formatting**: `*bold*`, `_italic_`, etc.

### Examples

**Good Translation**:
```po
msgid "Checking network interface %s"
msgstr "Comprobando interfaz de red %s"
```

**Bad Translation**:
```po
msgid "Checking network interface %s"
msgstr "Comprobando %s interfaz de red"  # Wrong placeholder order
```

## Contribution Recognition

### Translation Credits

Translators will be credited in:

1. **humans.txt**: Translator section
2. **CHANGELOG.md**: Translation additions
3. **GitHub contributors**: Automatic via commits
4. **Language metadata.json**: Translator names per language

### Translation Teams

| Language | Lead Translator | Contributors | Status |
|----------|----------------|--------------|--------|
| en_US | Project Team | - | Complete |
| es_ES | *Seeking* | - | Planned |
| fr_FR | *Seeking* | - | Planned |
| de_DE | *Seeking* | - | Planned |

## Resources

### Tools

- **Poedit**: https://poedit.net/ (PO file editor)
- **Lokalize**: https://apps.kde.org/lokalize/ (KDE translator)
- **Weblate**: https://weblate.org/ (Web-based translation)
- **Transifex**: https://www.transifex.com/ (Translation platform)

### References

- **GNU gettext**: https://www.gnu.org/software/gettext/
- **Bash i18n**: https://mywiki.wooledge.org/BashFAQ/098
- **POSIX locale**: https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap07.html

## Timeline

| Version | Milestone | Target Date |
|---------|-----------|-------------|
| v1.0 | English only | 2025-01 ✅ |
| v1.1 | i18n framework | 2025-03 |
| v1.2 | 3 languages (es, fr, de) | 2025-06 |
| v1.3 | 7 languages (+ pt, ja, zh, ru) | 2025-09 |
| v1.4 | Community languages | 2025-12 |

## Get Involved

Want to help translate?

1. **Check existing translations**: See what's needed
2. **Open an issue**: "Translation: [Your Language]"
3. **Join the team**: We'll add you to translators
4. **Start translating**: Follow workflow above
5. **Submit PR**: We review and merge

All translation contributors welcome, regardless of skill level!

---

**Last Updated**: 2025-01-22
**Version**: 1.0 (planning document)
**Contact**: i18n@example.com
